<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>The OAuth Dynamic Client Binding Protocol</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="The OAuth Dynamic Client Binding Protocol">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: small; color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: small; font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: small; font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: small; text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">C. Scholz, Ed.</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">COM.lounge GmbH</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">M. Machulak</td></tr>
<tr><td class="header">Expires: January 13, 2011</td><td class="header">Newcastle University</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">E. Maler</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">PayPal</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">July 12, 2010</td></tr>
</table></td></tr></table>
<h1><br />The OAuth Dynamic Client Binding Protocol<br />draft-oauth-binding-v1-00.txt</h1>

<h3>Abstract</h3>

<p>
        This specification describes the OAuth Dynamic Client Binding protocol.
      
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on January 13, 2011.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">1.1.</a>&nbsp;
Notational Conventions<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">1.2.</a>&nbsp;
Terminology<br />
<a href="#anchor4">2.</a>&nbsp;
Requirements<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">2.1.</a>&nbsp;
The client needs to be uniquely identifiable by the authorization server<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">2.2.</a>&nbsp;
The authorization server must be able to retrieve metadata about
          a client for later user interaction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">2.3.</a>&nbsp;
The authorization server must have the option of strongly
          authenticating the client and its metadata<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">2.4.</a>&nbsp;
Automatic client binding must also be possible from applications
          running on mobile devices<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">2.5.</a>&nbsp;
Data integrity must be ensured in large deployments where data
          propagation can be an issue<br />
<a href="#anchor10">3.</a>&nbsp;
Registration Flows<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">3.1.</a>&nbsp;
Providing client information on every request and not using client
      credentials at all.<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor12">3.2.</a>&nbsp;
The client pushes client information to the authorization server
      which returns client credentials<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor13">3.3.</a>&nbsp;
The authorization server pulls information from the client and
      returns client credentials<br />
<a href="#anchor14">4.</a>&nbsp;
Discovery of client registration endpoint<br />
<a href="#anchor15">5.</a>&nbsp;
Push Client Registration<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor16">5.1.</a>&nbsp;
Overview<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor17">5.2.</a>&nbsp;
Client Registration Request<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor18">5.3.</a>&nbsp;
Client Registration Response<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor19">5.4.</a>&nbsp;
Error Message<br />
<a href="#anchor20">6.</a>&nbsp;
Push Client Registration<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor21">6.1.</a>&nbsp;
Overview<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor22">6.2.</a>&nbsp;
Client Registration Request<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor23">6.3.</a>&nbsp;
Client Discovery<br />
<a href="#anchor24">7.</a>&nbsp;
Security Considerations<br />
<a href="#anchor25">Appendix&nbsp;A.</a>&nbsp;
Examples<br />
<a href="#anchor26">Appendix&nbsp;B.</a>&nbsp;
Contributors<br />
<a href="#anchor27">Appendix&nbsp;C.</a>&nbsp;
Acknowledgements<br />
<a href="#anchor28">Appendix&nbsp;D.</a>&nbsp;
Document History<br />
<a href="#rfc.references1">8.</a>&nbsp;
Normative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>
        In some use-case scenarios it is desirable or necessary to allow OAuth clients to
        obtain authorization from an OAuth authorization server without the two parties
        having previously interacted. Nevertheless, in order for the authorization server
        to function correctly in delivering to the User the details regarding clients
        seeking authorization (to access the end-user's resources), a method for automatic
        registration of clients is needed.
      
</p>
<p>
        The goal of this proposed registration protocol is to provide the client with a
        client identifier and optionally by a client secret, from the
        authorization server. In-turn the authorization server must also be provided with
        information about the client, with the client-name being the minimal information
        provided. However, in practice additional information will need to be furnished to
        the Authorization Server, including the homepage, icon, description, company and
        others.
      
</p>
<p>
        This informal draft presents a number of approaches and options with regards to
        the automatic registration of clients to the OAuth authorization server.
      
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.1"></a><h3>1.1.&nbsp;
Notational Conventions</h3>

<p>
          The key words 'MUST', 'MUST NOT', 'REQUIRED', 'SHALL', 'SHALL NOT', 'SHOULD', 'SHOULD
          NOT', 'RECOMMENDED', 'MAY', and 'OPTIONAL' in this document are to be interpreted as
          described in <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
        
</p>
<p>
          This document uses the Augmented Backus-Naur Form (ABNF) notation of
          <a class='info' href='#I-D.ietf-httpbis-p1-messaging'>[I&#8209;D.ietf&#8209;httpbis&#8209;p1&#8209;messaging]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Nielsen, H., Masinter, L., Leach, P., Berners-Lee, T., and J. Reschke, &ldquo;HTTP/1.1, part 1: URIs, Connections, and Message Parsing,&rdquo; March&nbsp;2010.</span><span>)</span></a>. Additionally, the realm and auth-param
          rules are included from <a class='info' href='#RFC2617'>[RFC2617]<span> (</span><span class='info'>Franks, J., Hallam-Baker, P., Hostetler, J., Lawrence, S., Leach, P., Luotonen, A., and L. Stewart, &ldquo;HTTP Authentication: Basic and Digest Access Authentication,&rdquo; June&nbsp;1999.</span><span>)</span></a>.
        
</p>
<p>
          Unless otherwise noted, all the protocol parameter names and values are case sensitive.
        
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.2"></a><h3>1.2.&nbsp;
Terminology</h3>

<p>
          </p>
<blockquote class="text"><dl>
<dt>resource server</dt>
<dd>
              
              A server capable of accepting and responding to protected resource requests.
            
</dd>
<dt>client</dt>
<dd>
              
              An application obtaining authorization and making protected resource requests.
            
</dd>
<dt>authorization server</dt>
<dd>
              
              A server capable of issuing tokens after successfully authenticating the resource
              owner and obtaining authorization. The authorization server may be the same server as
              the resource server, or a separate entity.
            
</dd>
<dt>end-user authorization endpoint</dt>
<dd>
              
              The authorization server's HTTP endpoint capable of authenticating the end-user and
              obtaining authorization. 
            
</dd>
<dt>token endpoint</dt>
<dd>
              
              The authorization server's HTTP endpoint capable of issuing tokens and refreshing
              expired tokens. 
            
</dd>
<dt>client identifier</dt>
<dd>
              
              An unique identifier issued to the client to identify itself to the authorization
              server. Client identifiers may have a matching secret. 
            
</dd>
<dt>client registration endpoint</dt>
<dd>
              The authorization server's HTTP endpoint capable of issuing client identifiers and optional client secrets.
            
</dd>
</dl></blockquote><p>
        
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Requirements</h3>

<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
The client needs to be uniquely identifiable by the authorization server</h3>

<p>
          		In order for an authorization server to do proper user delegated authorization
              it must be able to identify clients in order to prevent unauthorized access,
              e.g. if just a client name is given. Like today the client credentials should
              thus be provided by the authorization server and not proposed by the client.
    	      
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2"></a><h3>2.2.&nbsp;
The authorization server must be able to retrieve metadata about
          a client for later user interaction</h3>

<p>
          		In order for the authorization server to describe a client to the user in the
              authorization step it needs information about the client. This can be the client
              name at a minimum but today servers usually request at least a description, a
              homepage URL and an icon when doing manual registration.
    	      
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3"></a><h3>2.3.&nbsp;
The authorization server must have the option of strongly
          authenticating the client and its metadata</h3>

<p>
          		In order to prevent spoofing of clients the authorization server should have the
              option to verify the provided information to check if it's valid. This might be
              solved using certificates or in a simpler way by pulling from the client URL
              e.g. via hostmeta discovery.
    	      
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.4"></a><h3>2.4.&nbsp;
Automatic client binding must also be possible from applications
          running on mobile devices</h3>

<p>
          		Information cannot be pushed to mobile devices, so the two solutions are
              providing information in a response to a push and doing polling. The latter is
              not resource friendly though.
    	      
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.5"></a><h3>2.5.&nbsp;
Data integrity must be ensured in large deployments where data
          propagation can be an issue</h3>

<p>
          		When e.g. pushing information from a client to a server endpoint it might take a
              certain amount of time for this data to propagate through big installation over
              various data centers. Care needs to be taken that subsequent actions after the
              registration process like an authorization request show the correct data. (how
              would a pull look like here as it's always the client which needs to start the
              process)
    	      
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Registration Flows</h3>

<p>
    	    There are different approaches one can take to exchange client information
          with client credentials.
    	
</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Providing client information on every request and not using client
      credentials at all.</h3>

<p>
          		In this approach all necessary client information like client_name or
              client_icon is passed on every request to the authorization server to
              display it to the user if necessary.
    	    
</p>
<p>
          		This violates the first requirement though. No client credentials are
              actually provided which also violates the OAuth specification as it is now.
              For these reasons this specification does not include any protocol
              description for this case.
    	    
</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
The client pushes client information to the authorization server
      which returns client credentials</h3>

<p>
          		The client discovers the registration endpoint of the authorization server
              and sends it's client information to that endpoint in JSON format. The
              authorization server answers with client credentials in the response.
    	    
</p>
<p>
          		Authorization is possible here as the client information could be signed
              with the clients secret key and could contain a URL to the client homepage
              which could contain a discoverable public key. This involves PKI though
              which is hard to implement.
    	    
</p>
<p>
          		Moreover it might violate the propagation requirement as the information
              might be pushed to a server far away from the server the user gets send to
              in the next step which migth not know the client credentials yet.
    	    
</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
The authorization server pulls information from the client and
      returns client credentials</h3>

<p>
          		In this version the client sends a URL to the authorization server which
              then uses that information to pull metadata about the client e.g. via XRD.
              It then will create client credentials and return them in the response to
              the initial request.
    	    
</p>
<p>
        	    This does not directly solve the propagation issue as it's still a push to
              some server of the authorization server cluster and not bound to the user
              interaction.
    	    
</p>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Discovery of client registration endpoint</h3>

<p>
         For both models, push and pull, the client needs to  discover the client
         registration endpoint. 
      
</p>
<p>
         The client MUST use the [sitemeta] and [hostmeta] discovery mechanisms to learn
         about the URI of the client registration endpoint at the authorization server at
         which the client wants to register. The authorization server MUST provide a
         host-meta document containing a Link element with a rel value of <tt>http://oauth.net/as/registration</tt>
      
</p>
<p>
         For example:
       
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

      &lt;XRD&gt;
        &lt;Host&gt;http://server.example.com&lt;/Host&gt;
        &lt;Link rel="http://oauth.net/as/registration"
              href="http://server.example.com/register"&gt;
            &lt;Title&gt;Client Registration Endpoint&lt;/Title&gt;
        &lt;/Link&gt;
      &lt;/XRD&gt;

</pre></div>
<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Push Client Registration</h3>

<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
Overview</h3>

<p>
          The Push Client Registration Flow works as following:
        
</p>
<p>
          </p>
<ol class="text">
<li>
                The client sends required parameters to the client registration endpoint. The
                client MUST send its name, description and redirection URI and MAY send a URI
                to its icon.
            
</li>
<li>
                The authorization server checks the data and returns a client identifier and
                an optional client secret.
            
</li>
</ol><p>
        
</p><br /><hr class="insert" />
<a name="Figure 1"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  +--------+                                  +---------------+
  | Client |--(A)--- Registration Request ---&gt;| Authorization |
  |        |                                  |     Server    |
  |        |&lt;-(B)----Registration Response ---|               |
  |        |                                  |               |
  +--------+                                  +---------------+

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: Client Pull Registration Flow&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="anchor17"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
Client Registration Request</h3>

<p>
          The client sends a JSON formatted document to the client registration endpoint.
          The client includes the following parameters in the request:
        
</p>
<p>
          </p>
<blockquote class="text"><dl>
<dt>type</dt>
<dd>
                
                REQUIRED. This parameter must be set to "push". 
            
</dd>
<dt>name</dt>
<dd>
                
                REQUIRED. This field must contain the human readable name of the client.
            
</dd>
<dt>url</dt>
<dd>
                
                REQUIRED. This field contains the URL of the homepage of the client.
            
</dd>
<dt>description</dt>
<dd>
                
                REQUIRED. This field must contain the description of the client. 
            
</dd>
<dt>icon</dt>
<dd>
                
                OPTIONAL. If given, this field contains a URL to an icon for the client.
            
</dd>
</dl></blockquote><p>
        
</p>
<p>
          The client MAY include additional information in the request and the
          authorization server MAY ignore this information.
          
          [[ this sounds like confusion in the end, how would this match? Remove this
          sentence?]]
        
</p>
<p>
           For example the client might send the following request:
         
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

    POST /register HTTP/1.1
    Host: server.example.com
    Content-Type: application/json

    {
      type: "push",
      name: "Online Photo Gallery",
      url:  "http://onlinephotogallery.com",
      description: "Not only uploading, but also editing capabilities!",
      icon: http://onlinephotogallery.com/icon.png
    }


</pre></div>
<p>
          The parameters are included in the entity body of the HTTP request using the
          "application/json" media type as defined by [RFC4627]. The parameters are
          serialized into a JSON structure by adding each parameter at the highest
          structure level. Parameter names and string values are included as JSON strings.
        
</p>
<a name="anchor18"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3"></a><h3>5.3.&nbsp;
Client Registration Response</h3>

<p>
          After receiving and verifying information received from the client, the
          authorization server issues the client identifier and an optional client secret,
          and constructs the response by adding the following parameters to the entity
          body of the HTTP response with a 200 status code (OK):
        
</p>
<p>
          </p>
<ul class="text">
<li>
              <tt>client_id</tt> (REQUIRED)
            
</li>
<li>
              <tt>client_secret</tt> (OPTIONAL)
            
</li>
</ul><p>
        
</p>
<p>
          The parameters are included in the entity body of the HTTP response using the
          "application/json" media type as defined by [RFC4627]. The parameters are
          serialized into a JSON structure by adding each parameter at the highest
          structure level. Parameter names and string values are included as JSON strings.
        
</p>
<p>
          The authorization server MUST include the HTTP <tt>Cache-Control</tt> response header field with a value of
          <tt>no-store</tt> in any response containing 
          <tt>client_secret</tt>.
        
</p>
<p>
               For example the authorization server might return the following response:
             
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

    HTTP/1.1 200 OK
    Content-Type: application/json
    Cache-Control: no-store

    {
      "client_id":"5UO9XcL4TQTa",
      "client_secret":”WdRKN3zeTc20”
    }

</pre></div>
<a name="anchor19"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.4"></a><h3>5.4.&nbsp;
Error Message</h3>

<p>
            If the request for registration is invalid or unauthorized, the authorization
            server constructs the response by adding the following parameters to the
            entity body of the HTTP response with a 400 status code (Bad Request) using
            the “application/json” media type:
        
</p>
<p>
          </p>
<ul class="text">
<li>
              <tt>error</tt> (REQUIRED)
            
</li>
<li>
              <tt>description</tt> (OPTIONAL)
            
</li>
</ul><p>
        
</p>
<p>
           An example error response (with line breaks for readability)
         
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

    HTTP/1.1 400 Bad Request
    Content-Type: application/json
    Cache-Control: no-store

    {
    "error": "unauthorized_client",
    "description": "This client is not on the
      white list of this Authorization Server"
    }

</pre></div>
<a name="anchor20"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Push Client Registration</h3>

<a name="anchor21"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1"></a><h3>6.1.&nbsp;
Overview</h3>

<p>
          The Pull Client Registration Flow works as following:
        
</p>
<p>
          </p>
<ol class="text">
<li>
              The client sends its URI to the client registration endpoint
            
</li>
<li>
              The authorization server uses the [sitemeta] and [hostmeta] discovery
              mechanisms on this URI in order to retrieve the host-meta document
              describing the client. The host-meta document MUST contain the client’s
              name, description and redirection URI and MAY contain a URI to the client’s
              icon.
            
</li>
</ol><p>
        
</p><br /><hr class="insert" />
<a name="Figure 2"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  +--------+                                  +---------------+
  | Client |--(A)--- Registration Request ---&gt;| Authorization |
  |        |                                  |     Server    |
  |        |&lt;-(B)--- Client Discovery --------|               |
  |        |                                  |               |
  |        |--(C)---- Host Meta Document ----&gt;|               |
  |        |                                  |               |
  |        |&lt;-(D)--- Registration Response ---|               |
  |        |                                  |               |
  +--------+                                  +---------------+

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2: Client Pull Registration Flow&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="anchor22"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2"></a><h3>6.2.&nbsp;
Client Registration Request</h3>

<p>
          The client sends a JSON formatted document to the client registration endpoint.
          The client includes the following parameters in the request:
        
</p>
<p>
          </p>
<blockquote class="text"><dl>
<dt>type</dt>
<dd>
                
                REQUIRED. This parameter must be set to "pull". 
            
</dd>
<dt>url</dt>
<dd>
                
                REQUIRED. This field contains the URL of the homepage of the client. 
            
</dd>
</dl></blockquote><p>
        
</p>
<p>
          The client MAY include additional information in the request and the
          authorization server MAY ignore this information.
          
          [[ again: This might get confusing if there is no definition of schema etc. ]]
        
</p>
<p>
           For example the client might send the following request:
         
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

    POST /register HTTP/1.1
    Host: server.example.com
    Content-Type: application/json

    {
      type: "pull",
      url:  "http://onlinephotogallery.com",
    }


</pre></div>
<p>
          The parameters are included in the entity body of the HTTP request using the
          "application/json" media type as defined by [RFC4627]. The parameters are
          serialized into a JSON structure by adding each parameter at the highest
          structure level. Parameter names and string values are included as JSON strings.
        
</p>
<a name="anchor23"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.3"></a><h3>6.3.&nbsp;
Client Discovery</h3>

<p>
          The authorization server should evaluate this request and MAY perform a
          [sitemeta] and [hostmeta] discovery mechanism on the provided URL to the
          host-meta document for the client.
        
</p>
<p>
           For example:
         
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

    GET /.well-known/host-meta HTTP/1.1
    Host: server.example.com

</pre></div>
<p>
          The authorization server retrieves the host-meta document which MUST contain:
        
</p>
<p>
          </p>
<ul class="text">
<li>
              A 
              <tt>Property</tt> 
              element with a 
              <tt>type</tt>
              value of
              <tt>http://oauth.net/client/name</tt>
              containing the human readable client name.
              (REQUIRED)
            
</li>
<li>
              A 
              <tt>Property</tt> 
              element with a 
              <tt>type</tt>
              value of
              <tt>http://oauth.net/client/description</tt>
              containing the human readable description of the client
              (REQUIRED)
            
</li>
<li>
              A 
              <tt>Link</tt> 
              element with a 
              <tt>rel</tt>
              value of
              <tt>http://oauth.net/client/redirect_uri</tt>
              (REQUIRED)
            
</li>
<li>
              A 
              <tt>Link</tt> 
              element with a 
              <tt>rel</tt>
              value of
              <tt>http://oauth.net/client/uri</tt>
              (REQUIRED)
            
</li>
<li>
              A 
              <tt>Link</tt> 
              element with a 
              <tt>rel</tt>
              value of
              <tt>http://oauth.net/client/icon</tt>
              (REQUIRED)
            
</li>
</ul><p>
        
</p>
<p>
           For example:
         
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

    &lt;XRD&gt;
      &lt;Host&gt;http://onlinephotogallery.com&lt;/Host&gt;
      &lt;Property type="http://oauth.net/client/name"&gt;
        Online Photo Gallery
      &lt;/Property&gt;
      &lt;Property type="http://oauth.net/client/description"&gt;
        Not only uploading, but also editing capabilities!
      &lt;/Property&gt;
      &lt;Link rel="http://oauth.net/client/uri"
            href="http://onlinephotogallery.com"&gt;
        &lt;Title&gt;Client URI&lt;/Title&gt;
      &lt;/Link&gt;
      &lt;Link rel="http://oauth.net/client/redirect_uri"
            href="http://onlinephotogallery.com/cb"&gt;
        &lt;Title&gt;Client Redirect URI&lt;/Title&gt;
      &lt;/Link&gt;
      &lt;Link rel="http://oauth.net/client/icon"
            href="http://onlinephotogallery.com/icon.png"&gt;
        &lt;Title&gt;Client Icon&lt;/Title&gt;
      &lt;/Link&gt;
    &lt;/XRD&gt;

</pre></div>
<a name="anchor24"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Security Considerations</h3>

<p>
      
</p>
<a name="anchor25"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A"></a><h3>Appendix A.&nbsp;
Examples</h3>

<p>
        [[ todo ]]
      
</p>
<a name="anchor26"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B"></a><h3>Appendix B.&nbsp;
Contributors</h3>

<p>
        The following people contributed to preliminary versions of this document:
      
</p>
<p>
        The User Managed Access Working Group has dozens of very active contributors who
        proposed ideas and wording for this document, including: [[ If your name is
        missing or you think someone should be added here, please send Eran a note - don't
        be shy ]]
      
</p>
<p>
        [[ todo ]]
      
</p>
<a name="anchor27"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.C"></a><h3>Appendix C.&nbsp;
Acknowledgements</h3>

<p>
        [[ Add OAuth 2.0 authors + WG contributors ]]
      
</p>
<a name="anchor28"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.D"></a><h3>Appendix D.&nbsp;
Document History</h3>

<p>
        [[ to be removed by RFC editor before publication as an RFC ]]
      
</p>
<p>
        -01
        
        </p>
<ul class="text">
<li>
            started the spec.
          
</li>
</ul><p>
      
</p>
<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-httpbis-p1-messaging">[I-D.ietf-httpbis-p1-messaging]</a></td>
<td class="author-text">Fielding, R., Gettys, J., Mogul, J., Nielsen, H., Masinter, L., Leach, P., Berners-Lee, T., and J. Reschke, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-httpbis-p1-messaging-09.txt">HTTP/1.1, part 1: URIs, Connections, and Message Parsing</a>,&rdquo; draft-ietf-httpbis-p1-messaging-09 (work in progress), March&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-httpbis-p1-messaging-09.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2617">[RFC2617]</a></td>
<td class="author-text"><a href="mailto:john@math.nwu.edu">Franks, J.</a>, <a href="mailto:pbaker@verisign.com">Hallam-Baker, P.</a>, <a href="mailto:jeff@AbiSource.com">Hostetler, J.</a>, <a href="mailto:lawrence@agranat.com">Lawrence, S.</a>, <a href="mailto:paulle@microsoft.com">Leach, P.</a>, Luotonen, A., and <a href="mailto:stewart@OpenMarket.com">L. Stewart</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2617">HTTP Authentication: Basic and Digest Access Authentication</a>,&rdquo; RFC&nbsp;2617, June&nbsp;1999 (<a href="http://www.rfc-editor.org/rfc/rfc2617.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2617.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2617.xml">XML</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Christian Scholz (editor)</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">COM.lounge GmbH</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:cs@comlounge.net">cs@comlounge.net</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://comlounge.net">http://comlounge.net</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Maciej Machulak</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Newcastle University</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:m.p.machulak@ncl.ac.uk">m.p.machulak@ncl.ac.uk</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://ncl.ac.uk/">http://ncl.ac.uk/</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Eve Maler</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">PayPal</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:eve@xmlgrrl.com">eve@xmlgrrl.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.paypal.com/">http://www.paypal.com/</a></td></tr>
</table>
</body></html>
